   Compiling lpc-dev-assistant v0.1.0 (E:\Work\AMLP\lpc-dev-assistant)
warning: unused import: `Path`
 --> src\prompt_builder.rs:3:17
  |
3 | use std::path::{Path, PathBuf};
  |                 ^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: variable does not need to be mutable
   --> src\ollama_client.rs:156:21
    |
156 |                 let mut response = match res {
    |                     ----^^^^^^^^
    |                     |
    |                     help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: variable does not need to be mutable
  --> src\prompt_builder.rs:82:13
   |
82 |         let mut tokens = Self::estimate_tokens(&final_text);
   |             ----^^^^^^
   |             |
   |             help: remove this `mut`

warning: variable does not need to be mutable
   --> src\prompt_builder.rs:115:13
    |
115 |         let mut s = parts.join("\n\n");
    |             ----^
    |             |
    |             help: remove this `mut`

warning: variable does not need to be mutable
   --> src\prompt_builder.rs:116:13
    |
116 |         let mut tokens = Self::estimate_tokens(&s);
    |             ----^^^^^^
    |             |
    |             help: remove this `mut`

warning: variable does not need to be mutable
   --> src\prompt_builder.rs:118:13
    |
118 |         let mut max_chars = max_tokens * 4;
    |             ----^^^^^^^^^
    |             |
    |             help: remove this `mut`

warning: field `templates_dir` is never read
 --> src\prompt_builder.rs:6:5
  |
5 | pub struct PromptBuilder {
  |            ------------- field in this struct
6 |     templates_dir: PathBuf,
  |     ^^^^^^^^^^^^^
  |
  = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: function `main` is never used
  --> src\driver_analyzer.rs:96:4
   |
96 | fn main() {
   |    ^^^^

warning: function `visit` is never used
   --> src\driver_analyzer.rs:115:4
    |
115 | fn visit(path: &Path, re: &Regex, out: &mut Vec<(String, String)>) -> Result<(), std::io::Error> {
    |    ^^^^^

warning: you should consider adding a `Default` implementation for `OllamaClient`
  --> src\ollama_client.rs:44:5
   |
44 | /     pub fn new() -> Self {
45 | |         // Allow overriding Ollama base URL and timeout via environment variables for flexibility in testing and CI.
46 | |         let base = std::env::var("OLLAMA_URL").unwrap_or_else(|_| "http://localhost:11434".to_string());
47 | |         let timeout_secs = std::env::var("OLLAMA_TIMEOUT_SECS").ok()
...  |
58 | |     }
   | |_____^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#new_without_default
   = note: `#[warn(clippy::new_without_default)]` on by default
help: try adding this
   |
43 + impl Default for OllamaClient {
44 +     fn default() -> Self {
45 +         Self::new()
46 +     }
47 + }
   |

warning: used `unwrap()` on a `Result` value
  --> src\ollama_client.rs:53:21
   |
53 |               client: reqwest::Client::builder()
   |  _____________________^
54 | |                 .timeout(std::time::Duration::from_secs(timeout_secs))
55 | |                 .build()
56 | |                 .unwrap(),
   | |_________________________^
   |
   = note: if this value is an `Err`, it will panic
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unwrap_used
   = note: requested on the command line with `-W clippy::unwrap-used`

warning: this let-binding has unit value
   --> src\ollama_client.rs:137:13
    |
137 | /             let _ = rt.block_on(async move {
138 | |                 let request = OllamaGenerateRequest {
139 | |                     model: model.clone(),
140 | |                     prompt: prompt.clone(),
...   |
209 | |             });
    | |_______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#let_unit_value
    = note: `#[warn(clippy::let_unit_value)]` on by default
help: omit the `let` binding
    |
137 -             let _ = rt.block_on(async move {
137 +             rt.block_on(async move {
    |

warning: calling `push_str()` using a single-character string literal
  --> src\prompt_builder.rs:63:13
   |
63 |             out.push_str("\n");
   |             ^^^^^^^^^^^^^^^^^^ help: consider using `push` with a character literal: `out.push('\n')`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#single_char_add_str
   = note: `#[warn(clippy::single_char_add_str)]` on by default

warning: casting to the same type is unnecessary (`usize` -> `usize`)
  --> src\prompt_builder.rs:96:35
   |
96 |             let mut final_chars = (max_tokens * 4) as usize; // rough char budget
   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `(max_tokens * 4)`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unnecessary_cast
   = note: `#[warn(clippy::unnecessary_cast)]` on by default

warning: match expression looks like `matches!` macro
  --> src\mud_index.rs:72:9
   |
72 | /         match path.extension().and_then(|s| s.to_str()) {
73 | |             Some("c") | Some("h") | Some("lpc") | Some("y") | Some("txt") => true,
74 | |             _ => false,
75 | |         }
   | |_________^ help: try: `matches!(path.extension().and_then(|s| s.to_str()), Some("c") | Some("h") | Some("lpc") | Some("y") | Some("txt"))`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#match_like_matches_macro
   = note: `#[warn(clippy::match_like_matches_macro)]` on by default

warning: manual arithmetic check found
  --> src\mud_index.rs:81:25
   |
81 |             let start = if idx > max_len / 4 { idx - max_len / 4 } else { 0 };
   |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `idx.saturating_sub(max_len / 4)`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#implicit_saturating_sub
   = note: `#[warn(clippy::implicit_saturating_sub)]` on by default

warning: `lpc-dev-assistant` (lib test) generated 16 warnings (10 duplicates) (run `cargo clippy --fix --lib -p lpc-dev-assistant --tests` to apply 2 suggestions)
warning: `lpc-dev-assistant` (lib) generated 16 warnings (6 duplicates) (run `cargo clippy --fix --lib -p lpc-dev-assistant` to apply 9 suggestions)
warning: `to_string` applied to a type that implements `Display` in `writeln!` args
  --> src\bin\build_reference_db.rs:53:35
   |
53 |         writeln!(writer, "{}", obj.to_string())?;
   |                                   ^^^^^^^^^^^^ help: remove this
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#to_string_in_format_args
   = note: `#[warn(clippy::to_string_in_format_args)]` on by default

warning: used `unwrap()` on an `Option` value
  --> src\bin\efun_loader.rs:12:59
   |
12 |                         return Ok(Some((name.to_string(), v.as_str().unwrap().to_string())));
   |                                                           ^^^^^^^^^^^^^^^^^^^
   |
   = note: if this value is `None`, it will panic
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unwrap_used
   = note: requested on the command line with `-W clippy::unwrap-used`

error[E0601]: `main` function not found in crate `efun_loader`
  --> src\bin\efun_loader.rs:40:2
   |
40 | }
   |  ^ consider adding a `main` function to `src\bin\efun_loader.rs`

For more information about this error, try `rustc --explain E0601`.
error: could not compile `lpc-dev-assistant` (bin "efun_loader") due to 1 previous error
warning: build failed, waiting for other jobs to finish...
warning: `lpc-dev-assistant` (bin "efun_loader" test) generated 1 warning
warning: `lpc-dev-assistant` (bin "build_reference_db" test) generated 1 warning (run `cargo clippy --fix --bin "build_reference_db" -p lpc-dev-assistant --tests` to apply 1 suggestion)
warning: variable does not need to be mutable
   --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:156:21
    |
156 |                 let mut response = match res {
    |                     ----^^^^^^^^
    |                     |
    |                     help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: struct `OllamaGenerateRequest` is never constructed
 --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:5:12
  |
5 | pub struct OllamaGenerateRequest {
  |            ^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: struct `OllamaOptions` is never constructed
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:14:12
   |
14 | pub struct OllamaOptions {
   |            ^^^^^^^^^^^^^

warning: struct `OllamaGenerateResponse` is never constructed
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:22:12
   |
22 | pub struct OllamaGenerateResponse {
   |            ^^^^^^^^^^^^^^^^^^^^^^

warning: methods `generate` and `generate_stream` are never used
   --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:60:18
    |
 43 | impl OllamaClient {
    | ----------------- methods in this implementation
...
 60 |     pub async fn generate(&self, model: &str, prompt: &str) -> Result<String> {
    |                  ^^^^^^^^
...
111 |     pub fn generate_stream(&self, model: &str, prompt: &str) -> tokio_stream::wrappers::ReceiverStream<anyhow::Result<String>> {
    |            ^^^^^^^^^^^^^^^

warning: used `unwrap()` on a `Result` value
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:53:21
   |
53 |               client: reqwest::Client::builder()
   |  _____________________^
54 | |                 .timeout(std::time::Duration::from_secs(timeout_secs))
55 | |                 .build()
56 | |                 .unwrap(),
   | |_________________________^
   |
   = note: if this value is an `Err`, it will panic
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unwrap_used
   = note: requested on the command line with `-W clippy::unwrap-used`

warning: unused import: `std::path::PathBuf`
 --> src\bin\test_get_template.rs:2:5
  |
2 | use std::path::PathBuf;
  |     ^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: this let-binding has unit value
   --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:137:13
    |
137 | /             let _ = rt.block_on(async move {
138 | |                 let request = OllamaGenerateRequest {
139 | |                     model: model.clone(),
140 | |                     prompt: prompt.clone(),
...   |
209 | |             });
    | |_______________^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#let_unit_value
    = note: `#[warn(clippy::let_unit_value)]` on by default
help: omit the `let` binding
    |
137 -             let _ = rt.block_on(async move {
137 +             rt.block_on(async move {
    |

warning: used `unwrap()` on an `Option` value
 --> src\bin\test_get_template.rs:6:56
  |
6 |     let root = if cwd.ends_with("lpc-dev-assistant") { cwd.parent().unwrap().to_path_buf() } else { cwd };
  |                                                        ^^^^^^^^^^^^^^^^^^^^^
  |
  = note: if this value is `None`, it will panic
  = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unwrap_used
  = note: requested on the command line with `-W clippy::unwrap-used`

warning: `lpc-dev-assistant` (bin "test_get_template" test) generated 2 warnings (run `cargo clippy --fix --bin "test_get_template" -p lpc-dev-assistant --tests` to apply 1 suggestion)
warning: `lpc-dev-assistant` (bin "ollama_health") generated 7 warnings (run `cargo clippy --fix --bin "ollama_health" -p lpc-dev-assistant` to apply 2 suggestions)
warning: `lpc-dev-assistant` (bin "test_get_template") generated 2 warnings (2 duplicates)
warning: fields `model` and `done` are never read
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:23:9
   |
22 | pub struct OllamaGenerateResponse {
   |            ---------------------- fields in this struct
23 |     pub model: String,
   |         ^^^^^
24 |     pub response: String,
25 |     pub done: bool,
   |         ^^^^
   |
   = note: `OllamaGenerateResponse` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: method `generate_stream` is never used
   --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:111:12
    |
 43 | impl OllamaClient {
    | ----------------- method in this implementation
...
111 |     pub fn generate_stream(&self, model: &str, prompt: &str) -> tokio_stream::wrappers::ReceiverStream<anyhow::Result<String>> {
    |            ^^^^^^^^^^^^^^^

warning: multiple methods are never used
   --> E:\Work\AMLP\lpc-dev-assistant/src/context_manager.rs:102:12
    |
 12 | impl ContextManager {
    | ------------------- methods in this implementation
...
102 |     pub fn load_mudlib_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^
...
108 |     pub fn load_efuns_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^
...
114 |     pub fn load_reference_sources_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
120 |     pub fn load_simul_efun_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
126 |     pub fn load_master_api_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
132 |     pub fn load_socket_api_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
138 |     pub fn load_comm_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^
...
144 |     pub fn load_backend_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^
...
151 |     pub fn load_template_by_filename(&self, filename: &str) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^
...
193 |     pub fn ensure_templates_exist(&self) -> Result<()> {
    |            ^^^^^^^^^^^^^^^^^^^^^^
...
216 |     fn create_template_if_missing(&self, filename: &str, content: &str) -> Result<()> {
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: `lpc-dev-assistant` (bin "ollama_health" test) generated 7 warnings (7 duplicates)
warning: struct `OllamaGenerateResponse` is never constructed
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:22:12
   |
22 | pub struct OllamaGenerateResponse {
   |            ^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: struct `OllamaModel` is never constructed
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:29:12
   |
29 | pub struct OllamaModel {
   |            ^^^^^^^^^^^

warning: struct `OllamaListResponse` is never constructed
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:34:12
   |
34 | pub struct OllamaListResponse {
   |            ^^^^^^^^^^^^^^^^^^

warning: methods `generate` and `list_models` are never used
  --> E:\Work\AMLP\lpc-dev-assistant/src/ollama_client.rs:60:18
   |
43 | impl OllamaClient {
   | ----------------- methods in this implementation
...
60 |     pub async fn generate(&self, model: &str, prompt: &str) -> Result<String> {
   |                  ^^^^^^^^
...
94 |     pub async fn list_models(&self) -> Result<Vec<String>> {
   |                  ^^^^^^^^^^^

warning: fields `mud_references_path` and `extracted_path` are never read
 --> E:\Work\AMLP\lpc-dev-assistant/src/context_manager.rs:7:5
  |
6 | pub struct ContextManager {
  |            -------------- fields in this struct
7 |     mud_references_path: PathBuf,
  |     ^^^^^^^^^^^^^^^^^^^
8 |     templates_path: PathBuf,
9 |     extracted_path: PathBuf,
  |     ^^^^^^^^^^^^^^

warning: multiple methods are never used
   --> E:\Work\AMLP\lpc-dev-assistant/src/context_manager.rs:25:12
    |
 12 | impl ContextManager {
    | ------------------- methods in this implementation
...
 25 |     pub fn extract_archives(&self) -> Result<()> {
    |            ^^^^^^^^^^^^^^^^
...
 46 |     fn extract_zip(&self, path: &Path) -> Result<()> {
    |        ^^^^^^^^^^^
...
 77 |     fn extract_tar_gz(&self, path: &Path) -> Result<()> {
    |        ^^^^^^^^^^^^^^
...
102 |     pub fn load_mudlib_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^
...
108 |     pub fn load_efuns_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^
...
114 |     pub fn load_reference_sources_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
120 |     pub fn load_simul_efun_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
126 |     pub fn load_master_api_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
132 |     pub fn load_socket_api_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
138 |     pub fn load_comm_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^
...
144 |     pub fn load_backend_context(&self) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^
...
151 |     pub fn load_template_by_filename(&self, filename: &str) -> Result<String> {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^
...
157 |     pub fn search_code_examples(&self, keyword: &str) -> Vec<PathBuf> {
    |            ^^^^^^^^^^^^^^^^^^^^
...
193 |     pub fn ensure_templates_exist(&self) -> Result<()> {
    |            ^^^^^^^^^^^^^^^^^^^^^^
...
216 |     fn create_template_if_missing(&self, filename: &str, content: &str) -> Result<()> {
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: use of deprecated associated function `eframe::egui::ComboBox::from_id_source`: Renamed id_salt
   --> src\bin\egui_gui.rs:312:33
    |
312 |                 egui::ComboBox::from_id_source("provider_select")
    |                                 ^^^^^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: use of deprecated associated function `eframe::egui::ComboBox::from_id_source`: Renamed id_salt
   --> src\bin\egui_gui.rs:338:33
    |
338 |                 egui::ComboBox::from_id_source("model_select")
    |                                 ^^^^^^^^^^^^^^

warning: use of deprecated method `eframe::egui::ScrollArea::id_source`: Renamed id_salt
   --> src\bin\egui_gui.rs:415:18
    |
415 |                 .id_source("response_scroll")
    |                  ^^^^^^^^^

warning: use of deprecated method `eframe::egui::ScrollArea::id_source`: Renamed id_salt
   --> src\bin\egui_gui.rs:434:18
    |
434 |                 .id_source("refs_scroll")
    |                  ^^^^^^^^^

warning: `lpc-dev-assistant` (bin "run_ui_tests" test) generated 6 warnings (3 duplicates)
warning: `lpc-dev-assistant` (bin "run_stream_test" test) generated 9 warnings (3 duplicates)
warning: variants `Efuns`, `Mudlib`, and `References` are never constructed
  --> src\bin\egui_gui.rs:31:5
   |
29 | enum Context {
   |      ------- variants in this enum
30 |     Driver,
31 |     Efuns,
   |     ^^^^^
32 |     Mudlib,
   |     ^^^^^^
33 |     References,
   |     ^^^^^^^^^^
   |
   = note: `Context` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: method `name` is never used
  --> src\bin\egui_gui.rs:37:8
   |
36 | impl Context {
   | ------------ method in this implementation
37 |     fn name(&self) -> &str {
   |        ^^^^

warning: field `0` is never read
  --> src\bin\egui_gui.rs:68:14
   |
68 |     Complete(String),
   |     -------- ^^^^^^
   |     |
   |     field in this variant
   |
help: consider changing the field to be of unit type to suppress this warning while preserving the field numbering, or remove the field
   |
68 -     Complete(String),
68 +     Complete(()),
   |

warning: field `0` is never read
  --> src\bin\egui_gui.rs:69:11
   |
69 |     Error(String),
   |     ----- ^^^^^^
   |     |
   |     field in this variant
   |
help: consider changing the field to be of unit type to suppress this warning while preserving the field numbering, or remove the field
   |
69 -     Error(String),
69 +     Error(()),
   |

warning: `lpc-dev-assistant` (bin "run_ui_tests") generated 6 warnings (6 duplicates)
warning: used `unwrap()` on an `Option` value
   --> src\bin\egui_gui.rs:185:33
    |
185 |         let model = self.models[self.selected_model.unwrap()].name.clone();
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
    = note: if this value is `None`, it will panic
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.92.0/index.html#unwrap_used
    = note: requested on the command line with `-W clippy::unwrap-used`

warning: `lpc-dev-assistant` (bin "test_cli") generated 6 warnings (6 duplicates)
warning: `lpc-dev-assistant` (bin "run_stream_test") generated 9 warnings (9 duplicates)
warning: `lpc-dev-assistant` (bin "egui_gui") generated 9 warnings
